{"version":3,"sources":["<anon>"],"sourcesContent":["window.formVisibilityGroupRules = (function () {\n    function initialize(data) {\n\n        const inputElement = getInputByName(data.elementName);\n\n        if (!inputElement || data.action === 'None') {\n            return;\n        }\n\n        if (inputElement.type.toLowerCase() === 'checkbox' || inputElement.type.toLowerCase() === 'radio') {\n            inputElement.setAttribute('data-default-value', inputElement.checked ? 'on' : 'off');\n        } else {\n            inputElement.setAttribute('data-default-value', inputElement.value);\n        }\n\n        const widgetContainer = inputElement.closest('.widget');\n\n        processGroups(data, inputElement, widgetContainer, true);\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function triggerProperChangeEvent(element) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT' || type === 'checkbox' || type === 'radio' || type === 'file') {\n\n            element.dispatchEvent(new Event('change'));\n\n            return;\n        }\n\n        if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n\n            element.dispatchEvent(new Event('input'));\n\n            element.dispatchEvent(new Event('keyup'));\n\n            return;\n        }\n\n        element.dispatchEvent(new Event('input'));\n    }\n\n    function addProperListeners(element, callback) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT') {\n\n            if (type === 'checkbox') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('change', callback);\n\n            return;\n        }\n\n        if (tagName === 'INPUT') {\n\n            if ((type === 'checkbox' || type === 'radio')) {\n\n                element.addEventListener('change', callback);\n\n                element.addEventListener('click', callback);\n\n                return;\n            }\n\n            if (type === 'file') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        if (tagName === 'TEXTAREA') {\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        element.addEventListener('input', callback);\n    }\n\n    function processGroups(data, inputElement, widgetContainer, addHandlers) {\n\n        let anyGroupRuleMet = false;\n\n        data.groups.forEach(group => {\n\n            let groupPassed = true;\n\n            group.rules?.forEach(rule => {\n\n                const fieldElement = getInputByName(rule.field);\n\n                if (!fieldElement) {\n                    console.warn(`Field element not found: ${rule.field}. Ignoring the bad field.`);\n                    return;\n                }\n\n                const fieldValue = fieldElement.type.toLowerCase() === 'checkbox'\n                    ? (fieldElement.checked ? \"true\" : \"false\")\n                    : fieldElement.value;\n\n                var validationResult = validateRule(fieldValue, rule);\n\n                if (groupPassed && !validationResult) {\n\n                    groupPassed = false;\n                }\n\n                if (addHandlers) {\n\n                    addProperListeners(fieldElement, (e) => {\n                        processGroups(data, inputElement, widgetContainer, false);\n                    });\n                }\n            });\n\n            anyGroupRuleMet = anyGroupRuleMet || groupPassed;\n        });\n\n        if (widgetContainer) {\n\n            if (data.action === 'Show') {\n\n                if (anyGroupRuleMet) {\n                    widgetContainer.classList.remove('d-none');\n                } else {\n                    widgetContainer.classList.add('d-none');\n                    restoreOriginalState(inputElement);\n                }\n            }\n            else if (data.action === 'Hide') {\n\n                if (anyGroupRuleMet) {\n                    widgetContainer.classList.add('d-none');\n                    restoreOriginalState(inputElement);\n                } else {\n                    widgetContainer.classList.remove('d-none');\n                }\n            }\n        }\n    }\n\n    function restoreOriginalState(inputElement) {\n\n        var originalValue = inputElement.getAttribute('data-default-value') || '';\n\n        var type = inputElement.type.toLowerCase();\n\n        if (type === 'checkbox' || type === 'radio') {\n            inputElement.checked = originalValue == 'on';\n        } else {\n            inputElement.value = originalValue;\n        }\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function getInputByName(name) {\n        return document.querySelector(`input[name=\"${name}\"],select[name=\"${name}\"],textarea[name=\"${name}\"]`);\n    }\n\n    function validateRule(inputValue, rule) {\n\n        if (!rule.operator) {\n            console.warn(\"Rule operator is missing for rule\", rule);\n            return false;\n        }\n\n        var lowerInputValue = inputValue ? inputValue.trim().toLowerCase() : '';\n\n        var lowerRuleValue = rule.value ? rule.value.trim().toLowerCase() : '';\n\n        switch (rule.operator) {\n            case 'Is':\n                return lowerInputValue === lowerRuleValue;\n\n            case 'IsNot':\n                return lowerInputValue !== lowerRuleValue;\n\n            case 'Contains':\n                return lowerInputValue.includes(lowerRuleValue);\n\n            case 'DoesNotContain':\n                return !lowerInputValue.includes(lowerRuleValue);\n\n            case 'StartsWith':\n                return lowerInputValue.startsWith(lowerRuleValue);\n\n            case 'EndsWith':\n                return lowerInputValue.endsWith(lowerRuleValue);\n\n            case 'GreaterThan':\n                var numberInputValue = parseFloat(inputValue);\n                var numberRuleValue = parseFloat(rule.value);\n\n                if (!isNaN(numberInputValue) && !isNaN(numberRuleValue)) {\n                    return numberInputValue > numberRuleValue;\n                }\n                return inputValue > rule.value;\n\n            case 'LessThan':\n                var numberInputValue = parseFloat(inputValue);\n                var numberRuleValue = parseFloat(rule.value);\n\n                if (!isNaN(numberInputValue) && !isNaN(numberRuleValue)) {\n                    return numberInputValue < numberRuleValue;\n                }\n                return inputValue < rule.value;\n\n            case 'Empty':\n                return lowerInputValue === '';\n\n            case 'NotEmpty':\n                return lowerInputValue !== '';\n\n            default:\n                console.warn(`validateRule: Unknown operator \"${rule.operator}\" in rule`, rule);\n                return false;\n        }\n    }\n\n    return {\n        initialize: initialize\n    };\n})();\n"],"names":["window","formVisibilityGroupRules","triggerProperChangeEvent","element","tagName","type","toLowerCase","dispatchEvent","Event","restoreOriginalState","inputElement","originalValue","getAttribute","checked","value","getInputByName","name","document","querySelector","initialize","data","elementName","action","setAttribute","widgetContainer","closest","processGroups","addHandlers","anyGroupRuleMet","groups","forEach","group","groupPassed","rules","rule","fieldElement","field","console","warn","validationResult","validateRule","inputValue","operator","lowerInputValue","trim","lowerRuleValue","includes","startsWith","endsWith","numberInputValue","parseFloat","numberRuleValue","isNaN","addProperListeners","callback","addEventListener","e","classList","remove","add"],"mappings":"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"}
