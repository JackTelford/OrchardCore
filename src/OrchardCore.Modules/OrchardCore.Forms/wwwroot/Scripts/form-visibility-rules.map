{"version":3,"sources":["<anon>"],"sourcesContent":["window.formVisibilityGroupRules = (function () {\n    function initialize(data) {\n\n        const inputElement = getInputByName(data.elementName);\n\n        if (!inputElement || data.action === 'None') {\n            return;\n        }\n\n        const inputType = inputElement.type.toLowerCase();\n\n        if (inputType === 'checkbox' || inputType === 'radio') {\n            inputElement.setAttribute('data-default-value', inputElement.checked ? 'on' : 'off');\n        } else {\n            inputElement.setAttribute('data-default-value', inputElement.value);\n        }\n\n        const widgetContainer = inputElement.closest('.widget');\n\n        if (widgetContainer && !widgetContainer.dataset.originalDisplay) {\n            widgetContainer.dataset.originalDisplay = getComputedStyle(widgetContainer).display;\n        }\n\n        processGroups(data, inputElement, widgetContainer, true);\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function triggerProperChangeEvent(element) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT' || type === 'file') {\n\n            element.dispatchEvent(new Event('change'));\n\n            return;\n        }\n\n        if (type === 'checkbox' || type === 'radio') {\n            document.querySelectorAll(`input[name=\"${element.name}\"]`).forEach(element => {\n                element.dispatchEvent(new Event('change'));\n            });\n            return;\n        }\n\n        if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n\n            element.dispatchEvent(new Event('input'));\n\n            element.dispatchEvent(new Event('keyup'));\n\n            return;\n        }\n\n        element.dispatchEvent(new Event('input'));\n    }\n\n    function addProperListeners(element, callback) {\n\n        const tagName = element.tagName;\n\n        const type = (element.type || '').toLowerCase();\n\n        if (tagName === 'SELECT') {\n\n            if (type === 'checkbox') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('change', callback);\n\n            return;\n        }\n\n        if (tagName === 'INPUT') {\n\n            if (type === 'checkbox') {\n\n                var checkboxes = document.querySelectorAll(`input[name=\"${element.name}\"]`);\n\n                for (var i = 0; i < checkboxes.length; i++) {\n\n                    var checkbox = checkboxes[i];\n\n                    checkbox.addEventListener('change', callback);\n                }\n                return;\n            }\n\n            if (type === 'radio') {\n\n                var radioButtons = document.querySelectorAll(`input[name=\"${element.name}\"]`);\n\n                for (var i = 0; i < radioButtons.length; i++) {\n\n                    var radio = radioButtons[i];\n\n                    radio.addEventListener('change', callback);\n                }\n                return;\n            }\n\n            if (type === 'file') {\n\n                element.addEventListener('change', callback);\n\n                return;\n            }\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        if (tagName === 'TEXTAREA') {\n\n            element.addEventListener('input', callback);\n\n            element.addEventListener('keyup', callback);\n\n            return;\n        }\n\n        element.addEventListener('input', callback);\n    }\n\n    function processGroups(data, inputElement, widgetContainer, addHandlers) {\n\n        let anyGroupRuleMet = false;\n\n        data.groups.forEach(group => {\n\n            let groupPassed = true;\n\n            group.rules?.forEach(rule => {\n\n                const fieldElement = getInputByName(rule.field);\n\n                if (!fieldElement) {\n                    console.warn(`Field element not found: ${rule.field}. Ignoring the bad field.`);\n                    return;\n                }\n\n                const fieldType = fieldElement.type.toLowerCase();\n\n                if (fieldType === 'radio') {\n\n                    var selectedRadio = document.querySelector('input[name=\"' + rule.field + '\"]:checked');\n\n                    fieldValue = selectedRadio ? selectedRadio.value : '';\n\n                } else if (fieldType === 'checkbox') {\n\n                    const findCheckboxes = `input[name=\"${rule.field}\"]`;\n\n                    var checkboxWidget = document.querySelectorAll(findCheckboxes);\n\n                    if (checkboxWidget.length > 1) {\n\n                        var checkedBoxes = document.querySelectorAll(`${findCheckboxes}:checked`);\n\n                        fieldValue = Array.from(checkedBoxes).map(checkbox => checkbox.value).join(',');\n                    } else {\n                        fieldValue = fieldElement.checked ? \"true\" : \"false\";\n                    }\n                } else {\n                    fieldValue = fieldElement.value;\n                }\n\n                var validationResult = validateRule(fieldValue, rule);\n\n                if (groupPassed && !validationResult) {\n\n                    groupPassed = false;\n                }\n\n                if (addHandlers) {\n\n                    addProperListeners(fieldElement, (e) => {\n                        processGroups(data, inputElement, widgetContainer, false);\n                    });\n                }\n            });\n\n            anyGroupRuleMet = anyGroupRuleMet || groupPassed;\n        });\n\n        if (widgetContainer) {\n\n            if (data.action === 'Show') {\n\n                if (anyGroupRuleMet) {\n                    showElement(widgetContainer);\n                } else {\n                    hideElement(widgetContainer);\n                    restoreOriginalState(inputElement);\n                }\n            }\n            else if (data.action === 'Hide') {\n\n                if (anyGroupRuleMet) {\n                    hideElement(widgetContainer);\n                    restoreOriginalState(inputElement);\n                } else {\n                    showElement(widgetContainer);\n                }\n            }\n        }\n    }\n\n    function restoreOriginalState(inputElement) {\n\n        var originalValue = inputElement.getAttribute('data-default-value') || '';\n\n        var type = inputElement.type.toLowerCase();\n\n        if (type === 'checkbox' || type === 'radio') {\n            document.querySelectorAll(`input[name=\"${inputElement.name}\"]`)\n                .forEach(element => {\n                    element.checked = (originalValue === 'on');\n                });\n        } else {\n            inputElement.value = originalValue;\n        }\n\n        triggerProperChangeEvent(inputElement);\n    }\n\n    function hideElement(element) {\n\n        if (!element.dataset.originalDisplay) {\n\n            element.dataset.originalDisplay = getComputedStyle(element).display;\n        }\n\n        element.style.display = \"none\";\n    }\n\n    function showElement(element) {\n\n        element.style.display = element.dataset.originalDisplay || \"block\";\n    }\n\n    function getInputByName(name) {\n        return document.querySelector(`input[name=\"${name}\"],select[name=\"${name}\"],textarea[name=\"${name}\"]`);\n    }\n\n    function validateRule(inputValue, rule) {\n\n        if (!rule.operator) {\n            console.warn(\"Rule operator is missing for rule\", rule);\n            return false;\n        }\n\n        var lowerInputValue = inputValue ? inputValue.trim().toLowerCase() : '';\n\n        var lowerRuleValue = rule.value ? rule.value.trim().toLowerCase() : '';\n\n        switch (rule.operator) {\n            case 'Is':\n                return lowerInputValue === lowerRuleValue;\n\n            case 'IsNot':\n                return lowerInputValue !== lowerRuleValue;\n\n            case 'Contains':\n                return lowerInputValue.includes(lowerRuleValue);\n\n            case 'DoesNotContain':\n                return !lowerInputValue.includes(lowerRuleValue);\n\n            case 'StartsWith':\n                return lowerInputValue.startsWith(lowerRuleValue);\n\n            case 'EndsWith':\n                return lowerInputValue.endsWith(lowerRuleValue);\n\n            case 'GreaterThan':\n                var numberInputValue = parseFloat(inputValue);\n                var numberRuleValue = parseFloat(rule.value);\n\n                if (!isNaN(numberInputValue) && !isNaN(numberRuleValue)) {\n                    return numberInputValue > numberRuleValue;\n                }\n                return inputValue > rule.value;\n\n            case 'LessThan':\n                var numberInputValue = parseFloat(inputValue);\n                var numberRuleValue = parseFloat(rule.value);\n\n                if (!isNaN(numberInputValue) && !isNaN(numberRuleValue)) {\n                    return numberInputValue < numberRuleValue;\n                }\n                return inputValue < rule.value;\n\n            case 'Empty':\n                return lowerInputValue === '';\n\n            case 'NotEmpty':\n                return lowerInputValue !== '';\n\n            default:\n                console.warn(`validateRule: Unknown operator \"${rule.operator}\" in rule`, rule);\n                return false;\n        }\n    }\n\n    return {\n        initialize: initialize\n    };\n})();\n"],"names":["window","formVisibilityGroupRules","triggerProperChangeEvent","element","tagName","type","toLowerCase","dispatchEvent","Event","document","querySelectorAll","name","forEach","restoreOriginalState","inputElement","originalValue","getAttribute","checked","value","hideElement","dataset","originalDisplay","getComputedStyle","display","style","showElement","getInputByName","querySelector","initialize","data","elementName","action","inputType","setAttribute","widgetContainer","closest","processGroups","addHandlers","anyGroupRuleMet","groups","group","groupPassed","rules","rule","fieldElement","field","console","warn","fieldType","selectedRadio","fieldValue","findCheckboxes","checkboxWidget","length","Array","from","map","checkbox","join","validationResult","validateRule","inputValue","operator","lowerInputValue","trim","lowerRuleValue","includes","startsWith","endsWith","numberInputValue","parseFloat","numberRuleValue","isNaN","addProperListeners","callback","addEventListener","checkboxes","i","radioButtons","radio","e"],"mappings":"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"}
