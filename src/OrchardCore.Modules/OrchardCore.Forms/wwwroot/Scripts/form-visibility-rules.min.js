window.formVisibilityGroupRules=function(){function e(e){let t=e.tagName,n=(e.type||"").toLowerCase();if("SELECT"===t||"file"===n){e.dispatchEvent(new Event("change"));return}if("checkbox"===n||"radio"===n){document.querySelectorAll(`input[name="${e.name}"]`).forEach(e=>{e.dispatchEvent(new Event("change"))});return}if("INPUT"===t||"TEXTAREA"===t){e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("keyup"));return}e.dispatchEvent(new Event("input"))}function t(t){var n=t.getAttribute("data-default-value")||"",a=t.type.toLowerCase();"checkbox"===a||"radio"===a?document.querySelectorAll(`input[name="${t.name}"]`).forEach(e=>{e.checked="on"===n}):t.value=n,e(t)}function n(e){e.dataset.originalDisplay||(e.dataset.originalDisplay=getComputedStyle(e).display),e.style.display="none"}function a(e){e.style.display=e.dataset.originalDisplay||"block"}function r(e){return document.querySelector(`input[name="${e}"],select[name="${e}"],textarea[name="${e}"]`)}function i(e){return parseFloat((e||"").trim().replace(/,/g,"."))}return{initialize:function(u){let l=r(u.elementName);if(!l||"None"===u.action)return;let o=l.type.toLowerCase();"checkbox"===o||"radio"===o?l.setAttribute("data-default-value",l.checked?"on":"off"):l.setAttribute("data-default-value",l.value);let c=l.closest(".widget");c&&!c.dataset.originalDisplay&&(c.dataset.originalDisplay=getComputedStyle(c).display),function e(u,l,o,c){let s=!1;u.groups.forEach(t=>{let n=!0;t.rules?.forEach(t=>{let a=r(t.field);if(!a){console.warn(`Field element not found: ${t.field}. Ignoring the bad field.`);return}let s=a.type.toLowerCase();if("radio"===s){var d=document.querySelector('input[name="'+t.field+'"]:checked');fieldValue=d?d.value:""}else if("checkbox"===s){let e=`input[name="${t.field}"]`;document.querySelectorAll(e).length>1?fieldValue=Array.from(document.querySelectorAll(`${e}:checked`)).map(e=>e.value).join(","):fieldValue=a.checked?"true":"false"}else fieldValue=a.value;var f=function(e,t){if(!t.operator)return console.warn("Rule operator is missing for rule",t),!1;var n=e?e.trim():"",a=t.value?t.value.trim():"",r=i(n),u=i(a);switch(t.operator){case"Is":if(!isNaN(r)&&!isNaN(u))return r===u;return n===a;case"IsNot":if(!isNaN(r)&&!isNaN(u))return r!==u;return n!==a;case"Contains":return n.includes(a);case"DoesNotContain":return!n.includes(a);case"StartsWith":return n.startsWith(a);case"EndsWith":return n.endsWith(a);case"GreaterThan":if(!isNaN(r)&&!isNaN(u))return r>u;return!1;case"LessThan":if(!isNaN(r)&&!isNaN(u))return r<u;return!1;case"Empty":return""===n;case"NotEmpty":return""!==n;default:return console.warn(`validateRule: Unknown operator "${t.operator}" in rule`,t),!1}}(fieldValue,t);n&&!f&&(n=!1),c&&function(e,t){let n=e.tagName,a=(e.type||"").toLowerCase();if("SELECT"===n){if("checkbox"===a){e.addEventListener("change",t);return}e.addEventListener("change",t);return}if("INPUT"===n){if("checkbox"===a){for(var r=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<r.length;i++)r[i].addEventListener("change",t);return}if("radio"===a){for(var u=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<u.length;i++)u[i].addEventListener("change",t);return}if("file"===a){e.addEventListener("change",t);return}e.addEventListener("input",t),e.addEventListener("keyup",t);return}if("TEXTAREA"===n){e.addEventListener("input",t),e.addEventListener("keyup",t);return}e.addEventListener("input",t)}(a,t=>{e(u,l,o,!1)})}),s=s||n}),o&&("Show"===u.action?s?a(o):(n(o),t(l)):"Hide"===u.action&&(s?(n(o),t(l)):a(o)))}(u,l,c,!0),e(l)}}}();
