window.formVisibilityGroupRules=function(){function e(e){let t=e.tagName,n=(e.type||"").toLowerCase();if("SELECT"===t||"file"===n){e.dispatchEvent(new Event("change"));return}if("checkbox"===n||"radio"===n){document.querySelectorAll(`input[name="${e.name}"]`).forEach(e=>{e.dispatchEvent(new Event("change"))});return}if("INPUT"===t||"TEXTAREA"===t){e.dispatchEvent(new Event("input")),e.dispatchEvent(new Event("keyup"));return}e.dispatchEvent(new Event("input"))}function t(t){var n=t.getAttribute("data-default-value")||"",a=t.type.toLowerCase();"checkbox"===a||"radio"===a?document.querySelectorAll(`input[name="${t.name}"]`).forEach(e=>{e.checked="on"===n}):t.value=n,e(t)}function n(e){e.dataset.originalDisplay||(e.dataset.originalDisplay=getComputedStyle(e).display),e.style.display="none"}function a(e){e.style.display=e.dataset.originalDisplay||"block"}function r(e){return document.querySelector(`input[name="${e}"],select[name="${e}"],textarea[name="${e}"]`)}return{initialize:function(i){let o=r(i.elementName);if(!o||"None"===i.action)return;"checkbox"===o.type.toLowerCase()||"radio"===o.type.toLowerCase()?o.setAttribute("data-default-value",o.checked?"on":"off"):o.setAttribute("data-default-value",o.value);let l=o.closest(".widget");l&&!l.dataset.originalDisplay&&(l.dataset.originalDisplay=getComputedStyle(l).display),function e(i,o,l,u){let s=!1;i.groups.forEach(t=>{let n=!0;t.rules?.forEach(t=>{let a=r(t.field);if(!a){console.warn(`Field element not found: ${t.field}. Ignoring the bad field.`);return}if("radio"===a.type.toLowerCase()){var s=document.querySelector('input[name="'+t.field+'"]:checked');fieldValue=s?s.value:""}else if("checkbox"===a.type.toLowerCase()){let e=`input[name="${t.field}"]`;document.querySelectorAll(e).length>1?fieldValue=Array.from(document.querySelectorAll(`${e}:checked`)).map(e=>e.value).join(","):fieldValue=a.checked?"true":"false"}else fieldValue=a.value;var c=function(e,t){if(!t.operator)return console.warn("Rule operator is missing for rule",t),!1;var n=e?e.trim().toLowerCase():"",a=t.value?t.value.trim().toLowerCase():"";switch(t.operator){case"Is":return n===a;case"IsNot":return n!==a;case"Contains":return n.includes(a);case"DoesNotContain":return!n.includes(a);case"StartsWith":return n.startsWith(a);case"EndsWith":return n.endsWith(a);case"GreaterThan":var r=parseFloat(e),i=parseFloat(t.value);if(!isNaN(r)&&!isNaN(i))return r>i;return e>t.value;case"LessThan":var r=parseFloat(e),i=parseFloat(t.value);if(!isNaN(r)&&!isNaN(i))return r<i;return e<t.value;case"Empty":return""===n;case"NotEmpty":return""!==n;default:return console.warn(`validateRule: Unknown operator "${t.operator}" in rule`,t),!1}}(fieldValue,t);n&&!c&&(n=!1),u&&function(e,t){let n=e.tagName,a=(e.type||"").toLowerCase();if("SELECT"===n){if("checkbox"===a){e.addEventListener("change",t);return}e.addEventListener("change",t);return}if("INPUT"===n){if("checkbox"===a){for(var r=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<r.length;i++)r[i].addEventListener("change",t);return}if("radio"===a){for(var o=document.querySelectorAll(`input[name="${e.name}"]`),i=0;i<o.length;i++)o[i].addEventListener("change",t);return}if("file"===a){e.addEventListener("change",t);return}e.addEventListener("input",t),e.addEventListener("keyup",t);return}if("TEXTAREA"===n){e.addEventListener("input",t),e.addEventListener("keyup",t);return}e.addEventListener("input",t)}(a,t=>{e(i,o,l,!1)})}),s=s||n}),l&&("Show"===i.action?s?a(l):(n(l),t(o)):"Hide"===i.action&&(s?(n(l),t(o)):a(l)))}(i,o,l,!0),e(o)}}}();
