function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}window.formVisibilityGroupRules=function(){function e(n,a,r,o){var s=!1;n.groups.forEach((function(t){var l,c=!0;null===(l=t.rules)||void 0===l||l.forEach((function(t){var s=i(t.field);if(s){(function(e,t){if(!t.operator)return console.warn("Rule operator is missing for rule",t),!1;var i=e?e.trim():"",n=t.value?t.value.trim():"";switch(t.operator){case"Is":return i===n;case"IsNot":return i!==n;case"Contains":return i.includes(n);case"DoesNotContain":return!i.includes(n);case"StartsWith":return i.startsWith(n);case"EndsWith":return i.endsWith(n);case"GreaterThan":var a=parseFloat(e),r=parseFloat(t.value);return isNaN(a)||isNaN(r)?e>t.value:a>r;case"LessThan":a=parseFloat(e),r=parseFloat(t.value);return isNaN(a)||isNaN(r)?e<t.value:a<r;case"Empty":return""===i;case"NotEmpty":return""!==i;default:return console.warn('validateRule: Unknown operator "'.concat(t.operator,'" in rule'),t),!1}})("checkbox"===s.type?s.checked?"true":"false":s.value,t)||(c=!1);for(var l=document.querySelectorAll(".dynamic-visibility-condition"),u=0;u<l.length;u++){l[u].Name!=a.Name&&(l[u].dispatchEvent(new Event("change")),l[u].dispatchEvent(new Event("keyup")))}o&&(s.classList.add("dynamic-visibility-condition"),s.addEventListener("change",(function(t){e(n,a,r,!1)})),s.addEventListener("keyup",(function(t){e(n,a,r,!1)})))}else console.warn("Field element not found: ".concat(t.field,". Ignoring the bad field."))})),s=s||c})),o&&a.dispatchEvent(new Event("change"));var l=r.getAttribute("data-original-is-visible");console.log("widgetContainer is:",r,"action:",n.action,"originalState:",l),r&&("Show"===n.action?s?r.classList.remove("d-none"):(console.log("🛠 [".concat(n.elementName,"] rules failed → restoreOriginalState")),t(r)):"Hide"===n.action?s?r.classList.add("d-none"):(console.log("🛠 [".concat(n.elementName,"] rules failed → restoreOriginalState")),t(r)):(r.getAttribute("data-original-is-visible"),_readOnlyError("originalState"),"true"===l?r.classList.remove("d-none"):"false"===l?r.classList.add("d-none"):(r.setAttribute("data-original-is-visible",!0),r.classList.remove("d-none"))))}function t(e){var t="true"===e.getAttribute("data-original-is-visible");console.log("🔄 [restoreOriginalState] originally visible?",t,e),t?e.classList.remove("d-none"):(e.setAttribute("data-original-is-visible",!0),e.classList.add("d-none"))}function i(e){return document.querySelector('input[name="'.concat(e,'"],select[name="').concat(e,'"],textarea[name="').concat(e,'"]'))}return{initialize:function(t){var n=i(t.elementName);if(n){var a=n.closest(".widget");if(a){var r=function(e){if(!e)return!1;var t=getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility||"0"===t.opacity)return!1;var i=e.getBoundingClientRect();return i.width>0&&i.height>0}(a);a.setAttribute("data-original-is-visible",String(r)),console.log('✏️ Captured data-original-is-visible="'.concat(r,'"'),a)}e(t,n,a,!0)}}}}();
