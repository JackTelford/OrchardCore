function _readOnlyError(e){throw new TypeError('"'+e+'" is read-only')}window.formVisibilityGroupRules=function(){function e(i,a,r,o){if(o){var s=function(e){if(!e)return!1;var t=getComputedStyle(e);if("none"===t.display||"hidden"===t.visibility||"0"===t.opacity)return!1;var n=e.getBoundingClientRect();return n.width>0&&n.height>0}(r);r.setAttribute("data-original-is-visible",String(s))}var l=!1;i.groups.forEach((function(t){var s,c=!0;null===(s=t.rules)||void 0===s||s.forEach((function(t){var s=n(t.field);if(s){(function(e,t){if(!t.operator)return console.warn("Rule operator is missing for rule",t),!1;var n=e?e.trim():"",i=t.value?t.value.trim():"";switch(t.operator){case"Is":return n===i;case"IsNot":return n!==i;case"Contains":return n.includes(i);case"DoesNotContain":return!n.includes(i);case"StartsWith":return n.startsWith(i);case"EndsWith":return n.endsWith(i);case"GreaterThan":var a=parseFloat(e),r=parseFloat(t.value);return isNaN(a)||isNaN(r)?e>t.value:a>r;case"LessThan":a=parseFloat(e),r=parseFloat(t.value);return isNaN(a)||isNaN(r)?e<t.value:a<r;case"Empty":return""===n;case"NotEmpty":return""!==n;default:return console.warn('validateRule: Unknown operator "'.concat(t.operator,'" in rule'),t),!1}})("checkbox"===s.type?s.checked?"true":"false":s.value,t)||(c=!1);for(var l=document.querySelectorAll(".dynamic-visibility-condition"),u=0;u<l.length;u++){l[u].Name!=a.Name&&(l[u].dispatchEvent(new Event("change")),l[u].dispatchEvent(new Event("keyup")))}o&&(s.classList.add("dynamic-visibility-condition"),s.addEventListener("change",(function(t){e(i,a,r,!1)})),s.addEventListener("keyup",(function(t){e(i,a,r,!1)})))}else console.warn("Field element not found: ".concat(t.field,". Ignoring the bad field."))})),l=l||c})),o&&a.dispatchEvent(new Event("change"));var c=r.getAttribute("data-original-is-visible");if(console.log("originalState:",c,"elementName:",i.elementName,"anyGroupRuleMet:",l,"Action=",i.action),r)if("Show"===i.action)l?r.classList.remove("d-none"):(console.log("ðŸ›  [".concat(i.elementName,"] rules failed â†’ restoreOriginalState")),r.closest(".widget-form").querySelectorAll(".widget[data-original-is-visible]").forEach((function(e){return t(e)})));else if("Hide"===i.action){if(l)r.classList.add("d-none");else r.closest(".widget-form").querySelectorAll(".widget[data-original-is-visible]").forEach((function(e){return t(e)}))}else console.log("Never seen"),r.getAttribute("data-original-is-visible"),_readOnlyError("originalState"),"true"===c?r.classList.remove("d-none"):"false"===c?r.classList.add("d-none"):r.classList.remove("d-none")}function t(e){"true"===e.getAttribute("data-original-is-visible")?e.classList.add("d-none"):(e.setAttribute("data-original-is-visible"),e.classList.remove("d-none"))}function n(e){return document.querySelector('input[name="'.concat(e,'"],select[name="').concat(e,'"],textarea[name="').concat(e,'"]'))}return{initialize:function(t){var i=n(t.elementName);if(i){var a=i.closest(".widget");e(t,i,a,!0)}}}}();
